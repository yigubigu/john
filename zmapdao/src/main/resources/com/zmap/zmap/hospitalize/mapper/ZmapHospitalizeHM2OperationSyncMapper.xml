<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zmap.zmap.hospitalize.mapper.ZmapHospitalizeHM2OperationSyncMapper">
  <resultMap id="BaseResultMap" type="com.zmap.zmap.hospitalize.model.ZmapHospitalizeHM2OperationSyncModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="oper_flow_id" jdbcType="VARCHAR" property="operFlowId" />
    <result column="in_hos_code" jdbcType="VARCHAR" property="inHosCode" />
    <result column="oper_flow_code" jdbcType="VARCHAR" property="operFlowCode" />
    <result column="sickman_code" jdbcType="VARCHAR" property="sickmanCode" />
    <result column="oper_time" jdbcType="VARCHAR" property="operTime" />
    <result column="oper_code" jdbcType="VARCHAR" property="operCode" />
    <result column="main_doctor_code" jdbcType="VARCHAR" property="mainDoctorCode" />
    <result column="anes_doctor_code" jdbcType="VARCHAR" property="anesDoctorCode" />
    <result column="anes_doctor2_code" jdbcType="VARCHAR" property="anesDoctor2Code" />
    <result column="itiner_nurse_code" jdbcType="VARCHAR" property="itinerNurseCode" />
    <result column="instr_nurse_code" jdbcType="VARCHAR" property="instrNurseCode" />
    <result column="assist1_code" jdbcType="VARCHAR" property="assist1Code" />
    <result column="assist2_code" jdbcType="VARCHAR" property="assist2Code" />
    <result column="anes_type" jdbcType="VARCHAR" property="anesType" />
    <result column="sub_hospital_code" jdbcType="VARCHAR" property="subHospitalCode" />
    <result column="hospital_code" jdbcType="VARCHAR" property="hospitalCode" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    oper_flow_id, in_hos_code, oper_flow_code, sickman_code, oper_time, oper_code, main_doctor_code, 
    anes_doctor_code, anes_doctor2_code, itiner_nurse_code, instr_nurse_code, assist1_code, 
    assist2_code, anes_type, sub_hospital_code, hospital_code
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from zmap_h_m2_operation
    where oper_flow_id = #{operFlowId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from zmap_h_m2_operation
    where oper_flow_id = #{operFlowId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.zmap.zmap.hospitalize.model.ZmapHospitalizeHM2OperationSyncModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into zmap_h_m2_operation (oper_flow_id, in_hos_code, oper_flow_code, 
      sickman_code, oper_time, oper_code, 
      main_doctor_code, anes_doctor_code, anes_doctor2_code, 
      itiner_nurse_code, instr_nurse_code, assist1_code, 
      assist2_code, anes_type, sub_hospital_code, 
      hospital_code)
    values (#{operFlowId,jdbcType=VARCHAR}, #{inHosCode,jdbcType=VARCHAR}, #{operFlowCode,jdbcType=VARCHAR}, 
      #{sickmanCode,jdbcType=VARCHAR}, #{operTime,jdbcType=VARCHAR}, #{operCode,jdbcType=VARCHAR}, 
      #{mainDoctorCode,jdbcType=VARCHAR}, #{anesDoctorCode,jdbcType=VARCHAR}, #{anesDoctor2Code,jdbcType=VARCHAR}, 
      #{itinerNurseCode,jdbcType=VARCHAR}, #{instrNurseCode,jdbcType=VARCHAR}, #{assist1Code,jdbcType=VARCHAR}, 
      #{assist2Code,jdbcType=VARCHAR}, #{anesType,jdbcType=VARCHAR}, #{subHospitalCode,jdbcType=VARCHAR}, 
      #{hospitalCode,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.zmap.zmap.hospitalize.model.ZmapHospitalizeHM2OperationSyncModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into zmap_h_m2_operation
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="operFlowId != null">
        oper_flow_id,
      </if>
      <if test="inHosCode != null">
        in_hos_code,
      </if>
      <if test="operFlowCode != null">
        oper_flow_code,
      </if>
      <if test="sickmanCode != null">
        sickman_code,
      </if>
      <if test="operTime != null">
        oper_time,
      </if>
      <if test="operCode != null">
        oper_code,
      </if>
      <if test="mainDoctorCode != null">
        main_doctor_code,
      </if>
      <if test="anesDoctorCode != null">
        anes_doctor_code,
      </if>
      <if test="anesDoctor2Code != null">
        anes_doctor2_code,
      </if>
      <if test="itinerNurseCode != null">
        itiner_nurse_code,
      </if>
      <if test="instrNurseCode != null">
        instr_nurse_code,
      </if>
      <if test="assist1Code != null">
        assist1_code,
      </if>
      <if test="assist2Code != null">
        assist2_code,
      </if>
      <if test="anesType != null">
        anes_type,
      </if>
      <if test="subHospitalCode != null">
        sub_hospital_code,
      </if>
      <if test="hospitalCode != null">
        hospital_code,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="operFlowId != null">
        #{operFlowId,jdbcType=VARCHAR},
      </if>
      <if test="inHosCode != null">
        #{inHosCode,jdbcType=VARCHAR},
      </if>
      <if test="operFlowCode != null">
        #{operFlowCode,jdbcType=VARCHAR},
      </if>
      <if test="sickmanCode != null">
        #{sickmanCode,jdbcType=VARCHAR},
      </if>
      <if test="operTime != null">
        #{operTime,jdbcType=VARCHAR},
      </if>
      <if test="operCode != null">
        #{operCode,jdbcType=VARCHAR},
      </if>
      <if test="mainDoctorCode != null">
        #{mainDoctorCode,jdbcType=VARCHAR},
      </if>
      <if test="anesDoctorCode != null">
        #{anesDoctorCode,jdbcType=VARCHAR},
      </if>
      <if test="anesDoctor2Code != null">
        #{anesDoctor2Code,jdbcType=VARCHAR},
      </if>
      <if test="itinerNurseCode != null">
        #{itinerNurseCode,jdbcType=VARCHAR},
      </if>
      <if test="instrNurseCode != null">
        #{instrNurseCode,jdbcType=VARCHAR},
      </if>
      <if test="assist1Code != null">
        #{assist1Code,jdbcType=VARCHAR},
      </if>
      <if test="assist2Code != null">
        #{assist2Code,jdbcType=VARCHAR},
      </if>
      <if test="anesType != null">
        #{anesType,jdbcType=VARCHAR},
      </if>
      <if test="subHospitalCode != null">
        #{subHospitalCode,jdbcType=VARCHAR},
      </if>
      <if test="hospitalCode != null">
        #{hospitalCode,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zmap.zmap.hospitalize.model.ZmapHospitalizeHM2OperationSyncModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update zmap_h_m2_operation
    <set>
      <if test="inHosCode != null">
        in_hos_code = #{inHosCode,jdbcType=VARCHAR},
      </if>
      <if test="operFlowCode != null">
        oper_flow_code = #{operFlowCode,jdbcType=VARCHAR},
      </if>
      <if test="sickmanCode != null">
        sickman_code = #{sickmanCode,jdbcType=VARCHAR},
      </if>
      <if test="operTime != null">
        oper_time = #{operTime,jdbcType=VARCHAR},
      </if>
      <if test="operCode != null">
        oper_code = #{operCode,jdbcType=VARCHAR},
      </if>
      <if test="mainDoctorCode != null">
        main_doctor_code = #{mainDoctorCode,jdbcType=VARCHAR},
      </if>
      <if test="anesDoctorCode != null">
        anes_doctor_code = #{anesDoctorCode,jdbcType=VARCHAR},
      </if>
      <if test="anesDoctor2Code != null">
        anes_doctor2_code = #{anesDoctor2Code,jdbcType=VARCHAR},
      </if>
      <if test="itinerNurseCode != null">
        itiner_nurse_code = #{itinerNurseCode,jdbcType=VARCHAR},
      </if>
      <if test="instrNurseCode != null">
        instr_nurse_code = #{instrNurseCode,jdbcType=VARCHAR},
      </if>
      <if test="assist1Code != null">
        assist1_code = #{assist1Code,jdbcType=VARCHAR},
      </if>
      <if test="assist2Code != null">
        assist2_code = #{assist2Code,jdbcType=VARCHAR},
      </if>
      <if test="anesType != null">
        anes_type = #{anesType,jdbcType=VARCHAR},
      </if>
      <if test="subHospitalCode != null">
        sub_hospital_code = #{subHospitalCode,jdbcType=VARCHAR},
      </if>
      <if test="hospitalCode != null">
        hospital_code = #{hospitalCode,jdbcType=VARCHAR},
      </if>
    </set>
    where oper_flow_id = #{operFlowId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zmap.zmap.hospitalize.model.ZmapHospitalizeHM2OperationSyncModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update zmap_h_m2_operation
    set in_hos_code = #{inHosCode,jdbcType=VARCHAR},
      oper_flow_code = #{operFlowCode,jdbcType=VARCHAR},
      sickman_code = #{sickmanCode,jdbcType=VARCHAR},
      oper_time = #{operTime,jdbcType=VARCHAR},
      oper_code = #{operCode,jdbcType=VARCHAR},
      main_doctor_code = #{mainDoctorCode,jdbcType=VARCHAR},
      anes_doctor_code = #{anesDoctorCode,jdbcType=VARCHAR},
      anes_doctor2_code = #{anesDoctor2Code,jdbcType=VARCHAR},
      itiner_nurse_code = #{itinerNurseCode,jdbcType=VARCHAR},
      instr_nurse_code = #{instrNurseCode,jdbcType=VARCHAR},
      assist1_code = #{assist1Code,jdbcType=VARCHAR},
      assist2_code = #{assist2Code,jdbcType=VARCHAR},
      anes_type = #{anesType,jdbcType=VARCHAR},
      sub_hospital_code = #{subHospitalCode,jdbcType=VARCHAR},
      hospital_code = #{hospitalCode,jdbcType=VARCHAR}
    where oper_flow_id = #{operFlowId,jdbcType=VARCHAR}
  </update>
  
   <!-- **************** 以下为手动添加的配置 *****************-->
  <select id="selectByHisPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from zmap_h_m2_operation
    where oper_flow_code = #{operFlowCode,jdbcType=VARCHAR}
  </select>
  <insert id ="batchInsert" parameterType ="java.util.List">
  	 insert into zmap_h_m2_operation (oper_flow_id, in_hos_code, oper_flow_code,
  	  sickman_code, oper_time, oper_code, 
  	  main_doctor_code, anes_doctor_code, anes_doctor2_code, 
  	  itiner_nurse_code, instr_nurse_code, assist1_code, 
      assist2_code, anes_type, sub_hospital_code, hospital_code) values 
      <foreach collection="list" item="item" index="index" separator="," >
      (#{item.operFlowId,jdbcType=VARCHAR}, #{item.inHosCode,jdbcType=VARCHAR}, #{item.operFlowCode,jdbcType=VARCHAR}, 
      #{item.sickmanCode,jdbcType=VARCHAR}, #{item.operTime,jdbcType=VARCHAR}, #{item.operCode,jdbcType=VARCHAR}, 
      #{item.mainDoctorCode,jdbcType=VARCHAR}, #{item.anesDoctorCode,jdbcType=VARCHAR}, #{item.anesDoctor2Code,jdbcType=VARCHAR}, 
      #{item.itinerNurseCode,jdbcType=VARCHAR}, #{item.instrNurseCode,jdbcType=VARCHAR}, #{item.assist1Code,jdbcType=VARCHAR}, 
      #{item.assist2Code,jdbcType=VARCHAR}, #{item.anesType,jdbcType=VARCHAR},#{item.subHospitalCode,jdbcType=VARCHAR},#{item.hospitalCode,jdbcType=VARCHAR})
      </foreach>
  </insert>
   <delete id="deleteByHisPrimaryKey" parameterType="java.lang.String">
    delete from zmap_h_m2_operation
    where oper_flow_code = #{operFlowCode,jdbcType=VARCHAR}
  </delete>
  <update id="updateByHisPrimaryKey" parameterType="com.zmap.zmap.hospitalize.model.ZmapHospitalizeHM2OperationSyncModel">
    update zmap_h_m2_operation
    set 
      sickman_code = #{sickmanCode,jdbcType=VARCHAR},
      oper_time = #{operTime,jdbcType=VARCHAR},
      oper_code = #{operCode,jdbcType=VARCHAR},
      main_doctor_code = #{mainDoctorCode,jdbcType=VARCHAR},
      anes_doctor_code = #{anesDoctorCode,jdbcType=VARCHAR},
      anes_doctor2_code = #{anesDoctor2Code,jdbcType=VARCHAR},
      itiner_nurse_code = #{itinerNurseCode,jdbcType=VARCHAR},
      instr_nurse_code = #{instrNurseCode,jdbcType=VARCHAR},
      assist1_code = #{assist1Code,jdbcType=VARCHAR},
      assist2_code = #{assist2Code,jdbcType=VARCHAR},
      anes_type = #{anesType,jdbcType=VARCHAR},
      sub_hospital_code = #{subHospitalCode,jdbcType=VARCHAR},
      hospital_code = #{hospitalCode,jdbcType=VARCHAR}
    where oper_flow_code = #{operFlowCode,jdbcType=VARCHAR}
  </update>
  <update id="batchUpdate"  parameterType="java.util.List">
  	<foreach collection="list" item="item" index="index" open="" close="" separator=";">
  		update zmap_h_m2_operation
  		<set>
	      sickman_code = #{item.sickmanCode,jdbcType=VARCHAR},
	      oper_time = #{item.operTime,jdbcType=VARCHAR},
	      oper_code = #{item.operCode,jdbcType=VARCHAR},
	      main_doctor_code = #{item.mainDoctorCode,jdbcType=VARCHAR},
	      anes_doctor_code = #{item.anesDoctorCode,jdbcType=VARCHAR},
	      anes_doctor2_code = #{item.anesDoctor2Code,jdbcType=VARCHAR},
	      itiner_nurse_code = #{item.itinerNurseCode,jdbcType=VARCHAR},
	      instr_nurse_code = #{item.instrNurseCode,jdbcType=VARCHAR},
	      assist1_code = #{item.assist1Code,jdbcType=VARCHAR},
	      assist2_code = #{item.assist2Code,jdbcType=VARCHAR},
	      anes_type = #{item.anesType,jdbcType=VARCHAR},
	      sub_hospital_code = #{item.subHospitalCode,jdbcType=VARCHAR},
	      hospital_code = #{item.hospitalCode,jdbcType=VARCHAR}
  		</set>
  		 where oper_flow_code = #{item.operFlowCode,jdbcType=VARCHAR}
  	</foreach>
  </update>
  <update id="updateHospitalizeID">
  	update zmap_h_m2_operation m2 set m2.in_hos_code = (select m1.in_hos_id from zmap_h_m1_hospitalize m1 where m1.sickman_code = m2.sickman_code) 
	where m2.in_hos_code is null or m2.in_hos_code=''
  </update>
</mapper>